{% extends 'base.html' %}
{% load static %}

{% block title %}ഇന്ത്യൻ തൊഴിലാളി — Indian Thozhilali{% endblock %}

{% block content %}

<!-- Hero -->
<header class="hero">
  <div class="hero__background">
    <img src="{% static 'assets/white.jpg' %}" alt="തൊഴിലാളി ഐക്യദാർഢ്യം" class="hero__bg-image" width="1920"
      height="1080">
    <div class="hero__overlay"></div>
  </div>

  <!-- Left flag -->
  <div class="hero__flag hero__flag--left"></div>
  <!-- Right flag -->
  <div class="hero__flag hero__flag--right"></div>

  <div class="hero__container">
    <div class="hero__content">
      <div class="hero__masthead">
        <!-- Logo -->
        <div class="hero__logo-wrap">
          <img src="{% static 'assets/logoo.png' %}" alt="Indian Thozhilali Logo" class="hero__logo" width="96"
            height="96" loading="eager">
        </div>
        <!-- Title -->
        <h1 class="hero__title hero__title--masthead">
          <span class="hero__title-line hero__title-line--indian">ഇന്ത്യൻ</span>
          <span class="hero__title-line hero__title-line--thozhilali">തൊഴിലാളി</span>
        </h1>
      </div>
      <!-- Subtitle -->
      <p class="hero__subtitle">അധ്വാന വർഗ്ഗത്തിന്റെ അഖിലേന്ത്യാ മാസിക</p>
      <!-- CTA -->
      <div class="hero__cta">
        <a href="#stories" class="btn-primary">
          <span class="btn-primary__text">വായിക്കുക</span>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            aria-hidden="true">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </a>
      </div>

    </div>
  </div>
</header>


<!-- Featured Section -->
<section class="featured" id="magazine">
  <div class="featured__wrapper">
    <div class="featured__header">
      <span class="section-label" data-reveal>ഏറ്റവും പുതിയ ലക്കം</span>
    </div>

    {% if featured_magazine %}
    <div class="featured__content">
      <div class="featured__image" data-reveal-image>
        <div class="magazine-cover">
          <img src="{{ featured_magazine.cover_image.url }}" alt="{{ featured_magazine.title }}" loading="lazy"
            width="600" height="850">
          <div class="magazine-cover__badge">{{ featured_magazine.issued_at|date:"M y" }}</div>
        </div>
      </div>

      <div class="featured__text">
        <h2 class="featured__title">{{ featured_magazine.issued_at|date:"F Y" }}<br>മാസിക</h2>
        <p class="featured__description">{{ featured_magazine.description|truncatewords:30 }}</p>

        <div class="featured__meta">
          {% if featured_magazine.pdf %}
          <div class="meta-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
              aria-hidden="true">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
            </svg>
            <span>PDF</span>
          </div>
          {% endif %}
          {% if featured_magazine.page_count %}
          <div class="meta-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
              aria-hidden="true">
              <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
              <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
            <span>{{ featured_magazine.page_count }} പേജുകൾ</span>
          </div>
          {% endif %}
        </div>

        <div class="featured__actions" data-reveal>
          {% if featured_magazine.pdf %}
          <a href="{{ featured_magazine.pdf.url }}" class="btn-primary" download>
            <span class="btn-primary__text">ഡൗൺലോഡ് ചെയ്യുക</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
              aria-hidden="true">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
          </a>
          {% endif %}
          <a href="{% url 'magazine_detail' featured_magazine.slug %}" class="btn-text">
            <span>ഓൺലൈനായി വായിക്കുക</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
              aria-hidden="true">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
        </div>
      </div>
    </div>
    {% else %}
    <div class="featured__content">
      <p style="text-align: center; color: var(--ink-muted); padding: 60px 20px;">ഫീച്ചർ ചെയ്ത മാസിക ലഭ്യമല്ല. ദയവായി
        അഡ്മിൻ പാനലിൽ നിന്ന് ഒരു മാസിക പ്രസിദ്ധീകരിക്കുക.</p>
    </div>
    {% endif %}
  </div>
</section>

<!-- Stories Grid -->
<section class="stories" id="stories">
  <div class="stories__wrapper">
    <div class="stories__header">
      <span class="section-label" data-reveal>ഏറ്റവും പുതിയ വാർത്തകൾ</span>
      <h2 class="section-title" data-reveal>സമീപകാല ലേഖനങ്ങൾ</h2>
    </div>

    {% if recent_magazines %}
    <div class="stories__grid">
      {% for magazine in recent_magazines %}
      <article class="story-card {% if forloop.first %}story-card--featured{% endif %}">
        <a href="{% url 'magazine_detail' magazine.slug %}" class="story-card__link">
          <div class="story-card__media">
            <div class="story-card__image" data-reveal-image>
              <img src="{{ magazine.cover_image.url }}" alt="{{ magazine.title }}" loading="lazy" width="800"
                height="600">
            </div>
          </div>
          <div class="story-card__content">
            <time class="story-card__date" datetime="{{ magazine.issued_at|date:'Y-m-d' }}">
              {{ magazine.issued_at|date:"F d, Y" }}
            </time>
            <h3 class="story-card__title">{{ magazine.title }}</h3>
            <p class="story-card__excerpt">{{ magazine.description|truncatewords:20 }}</p>
            {% if forloop.first %}
            <div class="story-card__meta">
              <span class="story-card__read">6 മിനിറ്റ് വായന</span>
              <span class="story-card__arrow" aria-hidden="true">→</span>
            </div>
            {% else %}
            <span class="story-card__read">4 മിനിറ്റ്</span>
            {% endif %}
          </div>
        </a>
      </article>
      {% endfor %}
    </div>
    {% else %}
    <p style="text-align: center; color: var(--ink-muted); padding: 40px 20px;">ഇതുവരെ വാർത്തകൾ ലഭ്യമല്ല.</p>
    {% endif %}
  </div>
</section>

<!-- Archive -->
<section class="archive" id="archive">
  <div class="archive__wrapper">
    <div class="archive__header">
      <span class="section-label" data-reveal>ആർക്കൈവ്</span>
      <h2 class="section-title" data-reveal>കഴിഞ്ഞ ലക്കങ്ങൾ</h2>
    </div>

    {% if archive_magazines %}
    <div class="archive__grid">
      {% for magazine in archive_magazines %}
      <div class="archive-item">
        <div class="archive-item__cover" data-reveal-image>
          <img src="{{ magazine.cover_image.url }}" alt="{{ magazine.title }}" loading="lazy" width="500" height="700">
          <div class="archive-item__overlay">
            {% if magazine.pdf %}
            <a href="{{ magazine.pdf.url }}" class="archive-item__download"
              aria-label="ഡൗൺലോഡ് ചെയ്യുക {{ magazine.title }}" download>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                aria-hidden="true">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
            </a>
            {% endif %}
          </div>
          <div class="archive-item__badge">{{ magazine.issued_at|date:"M y" }}</div>
        </div>
        <div class="archive-item__info">
          <h3>{{ magazine.issued_at|date:"F Y" }}</h3>
          <p>{{ magazine.title|truncatewords:3 }}</p>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- View More Button -->
    <div style="text-align: center; margin-top: 48px;">
      <a href="{% url 'archive_list' %}" class="btn-primary">
        <span class="btn-primary__text">എല്ലാ ആർക്കൈവുകളും കാണുക</span>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
          aria-hidden="true">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
      </a>
    </div>
    {% else %}
    <p style="text-align: center; color: var(--ink-muted); padding: 40px 20px;">കൂടുതൽ ലക്കങ്ങൾ പ്രസിദ്ധീകരിക്കുമ്പോൾ
      ആർക്കൈവ് പൂരിപ്പിക്കും.</p>
    {% endif %}
  </div>
</section>

<!-- About -->
<section class="about" id="about">
  <div class="about__wrapper">
    <div class="about__content">
      <span class="section-label" data-reveal>നമ്മളെക്കുറിച്ച്</span>
      <h2 class="section-title" data-reveal>ഇന്ത്യൻ തൊഴിലാളി</h2>
      <div class="about__text" data-reveal>
        <p>കേരളത്തിലെ പ്രമുഖ തൊഴിലാളി മാസിക. 1950 മുതൽ തൊഴിലാളികളുടെ അവകാശങ്ങൾ, യൂണിയൻ പ്രവർത്തനങ്ങൾ,
          തൊഴിൽ നിയമങ്ങൾ എന്നിവയെക്കുറിച്ചുള്ള വിശദമായ വിവരങ്ങൾ നൽകുന്നു.</p>
        <p>ഇന്ത്യൻ നാഷണൽ ട്രേഡ് യൂണിയൻ കോൺഗ്രസിന്റെ (INTUC) കേരള ശാഖയുടെ ഔദ്യോഗിക പ്രസിദ്ധീകരണം.</p>
      </div>

      <div class="about__stats">
        <div class="stat-item" data-reveal>
          <span class="stat-item__number" data-count="75">0</span>
          <span class="stat-item__suffix">+</span>
          <span class="stat-item__label">വർഷങ്ങൾ പ്രസിദ്ധീകരണം</span>
        </div>
        <div class="stat-item" data-reveal>
          <span class="stat-item__number" data-count="50">0</span>
          <span class="stat-item__suffix">K+</span>
          <span class="stat-item__label">പ്രതിമാസ വായനക്കാർ</span>
        </div>
        <div class="stat-item" data-reveal>
          <span class="stat-item__number" data-count="900">0</span>
          <span class="stat-item__suffix">+</span>
          <span class="stat-item__label">പ്രസിദ്ധീകരിച്ച ലക്കങ്ങൾ</span>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}